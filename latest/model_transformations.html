<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Model Transformations · POMDPModelTools.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>POMDPModelTools.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="convenience.html">Convenience</a></li><li><a class="toctext" href="distributions.html">Distributions</a></li><li><a class="toctext" href="index.html">About</a></li><li><a class="toctext" href="interface_extensions.html">Interface Extensions</a></li><li class="current"><a class="toctext" href="model_transformations.html">Model Transformations</a><ul class="internal"><li><a class="toctext" href="#Sparse-Tabular-MDPs-and-POMDPs-1">Sparse Tabular MDPs and POMDPs</a></li><li><a class="toctext" href="#Fully-Observable-POMDP-1">Fully Observable POMDP</a></li><li><a class="toctext" href="#Generative-Belief-MDP-1">Generative Belief MDP</a></li><li><a class="toctext" href="#Underlying-MDP-1">Underlying MDP</a></li></ul></li><li><a class="toctext" href="policy_evaluation.html">Policy Evaluation</a></li><li><a class="toctext" href="utility_types.html">Utility Types</a></li><li><a class="toctext" href="visualization.html">Visualization</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="model_transformations.html">Model Transformations</a></li></ul><a class="edit-page" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/master/docs/src/model_transformations.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Model Transformations</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Model-Transformations-1" href="#Model-Transformations-1">Model Transformations</a></h1><p>POMDPModelTools contains several tools for transforming problems into other classes so that they can be used by different solvers.</p><h2><a class="nav-anchor" id="Sparse-Tabular-MDPs-and-POMDPs-1" href="#Sparse-Tabular-MDPs-and-POMDPs-1">Sparse Tabular MDPs and POMDPs</a></h2><p>The <code>SparseTabularMDP</code> and <code>SparseTabularPOMDP</code> represents discrete problems defined using the explicit interface. The transition and observation models are represented using sparse matrices. Solver writers can leverage these data structures to write efficient vectorized code. A problem writer can define its problem using the explicit interface and it can be automatically converted to a sparse tabular representation by calling the constructors <code>SparseTabularMDP(::MDP)</code> or <code>SparseTabularPOMDP(::POMDP)</code>. See the following docs to know more about the matrix representation and how to access the fields of the <code>SparseTabular</code> objects:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.SparseTabularMDP" href="#POMDPModelTools.SparseTabularMDP"><code>POMDPModelTools.SparseTabularMDP</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">SparseTabularMDP</code></pre><p>An MDP object where states and actions are integers and the transition is represented by a list of sparse matrices. This data structure can be useful to exploit in vectorized algorithm (e.g. see SparseValueIterationSolver). The recommended way to access the transition and reward matrices is through the provided accessor functions: <code>transition_matrix</code> and <code>reward_vector</code>.</p><p><strong>Fields</strong></p><ul><li><code>T::Vector{SparseMatrixCSC{Float64, Int64}}</code> The transition model is represented as a vector of sparse matrices (one for each action). <code>T[a][s, sp]</code> the probability of transition from <code>s</code> to <code>sp</code> taking action <code>a</code>.</li><li><code>R::Array{Float64, 2}</code> The reward is represented as a matrix where the rows are states and the columns actions: <code>R[s, a]</code> is the reward of taking action <code>a</code> in sate <code>s</code>.</li><li><code>terminal_states::Set{Int64}</code> Stores the terminal states</li><li><code>discount::Float64</code> The discount factor</li></ul><p><strong>Constructors</strong></p><ul><li><code>SparseTabularMDP(mdp::MDP)</code> : One can provide the matrices to the default constructor or one can construct a <code>SparseTabularMDP</code> from any discrete state MDP defined using the explicit interface. </li></ul><p>Note that constructing the transition and reward matrices requires to iterate over all the states and can take a while. To learn more information about how to define an MDP with the explicit interface please visit https://juliapomdp.github.io/POMDPs.jl/latest/explicit/ .</p><ul><li><code>SparseTabularMDP(smdp::SparseTabularMDP; transition, reward, discount)</code> : This constructor returns a new sparse MDP that is a copy of the original smdp except for the field specified by the keyword arguments.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L1-L21">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.SparseTabularPOMDP" href="#POMDPModelTools.SparseTabularPOMDP"><code>POMDPModelTools.SparseTabularPOMDP</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">SparseTabularPOMDP</code></pre><p>A POMDP object where states and actions are integers and the transition and observation distributions are represented by lists of sparse matrices. This data structure can be useful to exploit in vectorized algorithms to gain performance (e.g. see SparseValueIterationSolver). The recommended way to access the transition, reward, and observation matrices is through the provided accessor functions: <code>transition_matrix</code>, <code>reward_vector</code>, <code>observation_matrix</code>.</p><p><strong>Fields</strong></p><ul><li><code>T::Vector{SparseMatrixCSC{Float64, Int64}}</code> The transition model is represented as a vector of sparse matrices (one for each action). <code>T[a][s, sp]</code> the probability of transition from <code>s</code> to <code>sp</code> taking action <code>a</code>.</li><li><code>R::Array{Float64, 2}</code> The reward is represented as a matrix where the rows are states and the columns actions: <code>R[s, a]</code> is the reward of taking action <code>a</code> in sate <code>s</code>.</li><li><code>O::Vector{SparseMatrixCSC{Float64, Int64}}</code> The observation model is represented as a vector of sparse matrices (one for each action). <code>O[a][sp, o]</code> is the probability of observing <code>o</code> from state <code>sp</code> after having taken action <code>a</code>.</li><li><code>terminal_states::Set{Int64}</code> Stores the terminal states</li><li><code>discount::Float64</code> The discount factor</li></ul><p><strong>Constructors</strong></p><ul><li><code>SparseTabularPOMDP(pomdp::POMDP)</code> : One can provide the matrices to the default constructor or one can construct a <code>SparseTabularPOMDP</code> from any discrete state MDP defined using the explicit interface. </li></ul><p>Note that constructing the transition and reward matrices requires to iterate over all the states and can take a while. To learn more information about how to define an MDP with the explicit interface please visit https://juliapomdp.github.io/POMDPs.jl/latest/explicit/ .</p><ul><li><code>SparseTabularPOMDP(spomdp::SparseTabularMDP; transition, reward, observation, discount)</code> : This constructor returns a new sparse POMDP that is a copy of the original smdp except for the field specified by the keyword arguments.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L72-L93">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.transition_matrix" href="#POMDPModelTools.transition_matrix"><code>POMDPModelTools.transition_matrix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">transition_matrix(p::SparseTabularProblem, a)</code></pre><p>Accessor function for the transition model of a sparse tabular problem. It returns a sparse matrix containing the transition probabilities when taking action a: T[s, sp] = Pr(sp | s, a).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L277-L281">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.reward_vector" href="#POMDPModelTools.reward_vector"><code>POMDPModelTools.reward_vector</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">reward_vector(p::SparseTabularProblem, a)</code></pre><p>Accessor function for the reward function of a sparse tabular problem. It returns a vector containing the reward for all the states when taking action a: R(s, a).  The length of the return vector is equal to the number of states.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L291-L296">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.observation_matrix" href="#POMDPModelTools.observation_matrix"><code>POMDPModelTools.observation_matrix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">observation_matrix(p::SparseTabularPOMDP, a::Int64)</code></pre><p>Accessor function for the observation model of a sparse tabular POMDP. It returns a sparse matrix containing the observation probabilities when having taken action a: O[sp, o] = Pr(o | sp, a).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L314-L318">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.transition_matrices" href="#POMDPModelTools.transition_matrices"><code>POMDPModelTools.transition_matrices</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">transition_matrices(p::SparseTabularProblem)</code></pre><p>Accessor function for the transition model of a sparse tabular problem. It returns a list of sparse matrices for each action of the problem.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L284-L289">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.reward_matrix" href="#POMDPModelTools.reward_matrix"><code>POMDPModelTools.reward_matrix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">reward_matrix(p::SparseTabularProblem)</code></pre><p>Accessor function for the reward matrix R[s, a] of a sparse tabular problem.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L299-L303">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.observation_matrices" href="#POMDPModelTools.observation_matrices"><code>POMDPModelTools.observation_matrices</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">observation_matrices(p::SparseTabularPOMDP)</code></pre><p>Accessor function for the observation model of a sparse tabular POMDP. It returns a list of sparse matrices for each action of the problem.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/sparse_tabular.jl#L321-L326">source</a></section><h2><a class="nav-anchor" id="Fully-Observable-POMDP-1" href="#Fully-Observable-POMDP-1">Fully Observable POMDP</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.FullyObservablePOMDP" href="#POMDPModelTools.FullyObservablePOMDP"><code>POMDPModelTools.FullyObservablePOMDP</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">FullyObservablePOMDP(mdp)</code></pre><p>Turn <code>MDP</code> <code>mdp</code> into a <code>POMDP</code> where the observations are the states of the MDP.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/fully_observable_pomdp.jl#L1-L5">source</a></section><h2><a class="nav-anchor" id="Generative-Belief-MDP-1" href="#Generative-Belief-MDP-1">Generative Belief MDP</a></h2><p>Every POMDP is an MDP on the belief space <code>GenerativeBeliefMDP</code> creates a generative model for that MDP.</p><div class="admonition warning"><div class="admonition-title">Warning</div><div class="admonition-text"><p>The reward generated by the <code>GenerativeBeliefMDP</code> is the reward for a <em>single state sampled from the belief</em>; it is not the   expected reward for that belief transition (though, in expectation, they are equivalent of course). Implementing the model with the expected reward requires a custom implementation because belief updaters do not typically deal with reward.</p></div></div><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.GenerativeBeliefMDP" href="#POMDPModelTools.GenerativeBeliefMDP"><code>POMDPModelTools.GenerativeBeliefMDP</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">GenerativeBeliefMDP(pomdp, updater)</code></pre><p>Create a generative model of the belief MDP corresponding to POMDP <code>pomdp</code> with belief updates performed by <code>updater</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/generative_belief_mdp.jl#L1-L5">source</a></section><h3><a class="nav-anchor" id="Example-1" href="#Example-1">Example</a></h3><pre><code class="language-julia">using POMDPModels
using POMDPModelTools
using BeliefUpdaters

pomdp = BabyPOMDP()
updater = DiscreteUpdater(pomdp)

belief_mdp = GenerativeBeliefMDP(pomdp, updater)
@show statetype(belief_mdp) # POMDPModels.BoolDistribution

for (a, r, sp) in stepthrough(belief_mdp, RandomPolicy(belief_mdp), &quot;a,r,sp&quot;, max_steps=5)
    @show a, r, sp
end</code></pre><h2><a class="nav-anchor" id="Underlying-MDP-1" href="#Underlying-MDP-1">Underlying MDP</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="POMDPModelTools.UnderlyingMDP" href="#POMDPModelTools.UnderlyingMDP"><code>POMDPModelTools.UnderlyingMDP</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">UnderlyingMDP(m::POMDP)</code></pre><p>Transform <code>POMDP</code> <code>m</code> into an <code>MDP</code> where the states are fully observed.</p><pre><code class="language-none">UnderlyingMDP(m::MDP)</code></pre><p>Return <code>m</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaPOMDP/POMDPModelTools.jl/blob/bb8255a3c46ba382ff48ae5e3fbf5309ff6790cc/src/underlying_mdp.jl#L1-L9">source</a></section><footer><hr/><a class="previous" href="interface_extensions.html"><span class="direction">Previous</span><span class="title">Interface Extensions</span></a><a class="next" href="policy_evaluation.html"><span class="direction">Next</span><span class="title">Policy Evaluation</span></a></footer></article></body></html>
